<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Công cụ tính thuế thu nhập cá nhân 2026 - Tính lương Gross sang Net và ngược lại">
  <title>Tính Thuế Thu Nhập Cá Nhân 2026</title>

  <!-- Google Fonts - Be Vietnam Pro -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* CSS Custom Properties */
    :root {
      /* Colors */
      --color-primary: #2563eb;
      --color-primary-dark: #1d4ed8;
      --color-success: #16a34a;
      --color-error: #dc2626;
      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-text: #1e293b;
      --color-text-muted: #64748b;
      --color-border: #e2e8f0;

      /* Typography */
      --font-family: 'Be Vietnam Pro', system-ui, -apple-system, sans-serif;
      --font-size-base: 16px;
      --line-height: 1.6;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;

      /* Touch targets (WCAG 2.2) */
      --touch-target: 44px;

      /* Border radius */
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    /* CSS Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: var(--font-size-base);
    }

    body {
      font-family: var(--font-family);
      line-height: var(--line-height);
      color: var(--color-text);
      background: var(--color-bg);
      min-height: 100vh;
      padding: var(--space-md);
    }

    /* Calculator Container */
    .calculator {
      max-width: 600px;
      margin: 0 auto;
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      padding: var(--space-lg);
    }

    /* Header */
    .calc-header {
      text-align: center;
      margin-bottom: var(--space-lg);
    }

    .calc-header h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--color-text);
      margin-bottom: var(--space-xs);
    }

    .calc-header .subtitle {
      font-size: 0.875rem;
      color: var(--color-text-muted);
    }

    /* Form Styles */
    fieldset {
      border: none;
      margin-bottom: var(--space-lg);
    }

    legend {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-md);
    }

    /* Results Section */
    #results {
      margin-top: var(--space-lg);
      padding-top: var(--space-lg);
      border-top: 1px solid var(--color-border);
    }

    /* Responsive Design */
    @media (max-width: 480px) {
      body {
        padding: var(--space-sm);
      }

      .calculator {
        padding: var(--space-md);
        border-radius: var(--radius-md);
      }

      .calc-header h1 {
        font-size: 1.25rem;
      }
    }

    /* Screen reader only utility */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }
  </style>
</head>
<body>
  <main class="calculator">
    <header class="calc-header">
      <h1>Tính Thuế Thu Nhập Cá Nhân 2026</h1>
      <p class="subtitle">Công cụ tính lương Gross ↔ Net theo luật thuế mới</p>
    </header>

    <form id="calc-form" novalidate>
      <fieldset>
        <legend>Thông tin thu nhập</legend>
        <!-- Input fields will be added in Phase 03 -->
        <p style="color: var(--color-text-muted); font-size: 0.875rem;">
          Các trường nhập liệu sẽ được thêm trong giai đoạn tiếp theo.
        </p>
      </fieldset>

      <fieldset>
        <legend>Cài đặt</legend>
        <!-- Region, dependents will be added in Phase 03 -->
        <p style="color: var(--color-text-muted); font-size: 0.875rem;">
          Cài đặt vùng lương và người phụ thuộc sẽ được thêm sau.
        </p>
      </fieldset>
    </form>

    <section id="results" aria-live="polite">
      <!-- Output will be added in Phase 03 -->
      <p style="color: var(--color-text-muted); font-size: 0.875rem; text-align: center;">
        Kết quả tính toán sẽ hiển thị ở đây.
      </p>
    </section>
  </main>

  <script>
    /**
     * VND Currency Formatting Utility
     * Handles Vietnamese Dong formatting and parsing
     */
    const VND = {
      formatter: new Intl.NumberFormat('vi-VN', {
        style: 'currency',
        currency: 'VND',
        maximumFractionDigits: 0
      }),

      /**
       * Format a number as VND currency string
       * @param {number} amount - The amount to format
       * @returns {string} Formatted VND string (e.g., "1.000.000 ₫")
       */
      format(amount) {
        if (typeof amount !== 'number' || isNaN(amount)) {
          return this.formatter.format(0);
        }
        return this.formatter.format(Math.round(amount));
      },

      /**
       * Parse a VND currency string to number
       * @param {string} str - The string to parse (e.g., "1.000.000 ₫")
       * @returns {number} Parsed number value
       */
      parse(str) {
        if (typeof str !== 'string') {
          return 0;
        }
        // Remove VND symbol (₫), spaces, and dot separators
        const cleaned = str.replace(/[^\d-]/g, '');
        return parseInt(cleaned, 10) || 0;
      }
    };

    // Export VND utility to window for testing and Phase 02/03 usage
    window.VND = VND;

    // Log initialization for debugging
    console.log('VND Utility initialized');
    console.log('Test VND.format(1000000):', VND.format(1000000));
    console.log('Test VND.parse("1.000.000 ₫"):', VND.parse("1.000.000 ₫"));
  </script>
</body>
</html>
